<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
<script>
		var arr = ['This','is','Baidu','Employer'];
		function strArr(arr){
			var str = arr.join(' ');
			console.log(str);
		};
		strArr(arr);

		var foo = 'get-element-by-id';
		function test1(str){
			var arr = str.split('-');
			for(var i=1;i<arr.length;i++){
				arr[i] = arr[i].charAt(0).toUpperCase() + arr[i].substring(1);
			};
			str = arr.join('');
			console.log(str);
		}
		test1(foo);

		var numberArray = [3,6,2,4,1,5];
		console.log(numberArray.reverse());
		function test2(a,b){
			return a-b;
		};
		console.log(numberArray.sort(test2));
//驱虫+排序
		var mulArr = [6,2,3,6,2,4,1,5];
		for(var i=0;i<mulArr.length;i++){
			for(var j=i+1;j<mulArr.length;j++){
				if(mulArr[j]==mulArr[i]){
					mulArr.splice(j,1);
					j--;
				}
			};
		};
		console.log(mulArr.sort(test2));
// 输出今天的日期，以YYYY-MM-DD的方式，比如今天是2014年9月26日，则输出2014-09-26
		var d = new Date();
		var year = d.getFullYear();
		var month = d.getMonth() + 1;
		month = month <10 ? '0' + month : month;
		var day = d.getDate();
		day = day <10 ? '0' + day : day ;
		console.log(year + '-' + month + '-' + day );

//将字符串”<tr><td>{$id}</td><td>{$name}</td></tr>>”中的{$id}替换成10，{$name}替换成Tony （使用正则表达式）
		var str = '<tr><td>{$id}</td><td>{$name}</td></tr>>';

		var zzstr = str.replace(/{\$id}/g,'10').replace(/{\$name}/g,'Tony');
		console.log(str + '--->' + zzstr);

//写一个函数escapeHtml，将<, >, &, “进行转义
		function escapeHtml(str){
			return str.replace(/[<>'&]/g,function(match){
				switch(match){
					case '<' :
						return '&lt;';
					case '>' :
						return '&gt;';
					case '&' :
						return '&amp;';
					case '\'' :
						return '&quot;';
				}
			});
		};
		var str = "1,[,<,>,',&,25";
		console.log(escapeHtml(str));

		// var foo = 1;
		// function(){
		//     console.log(foo);
		//     var foo = 2;
		//     console.log(foo);
		// }

// 用js实现随机选取10–100之间的10个数字，存入一个数组，并排序。
		// function radArr(a,b,num){
		// 	for(var i=a;i<b;i+=num){
		// 		var arr = [] ;
		// 		arr[i] = Math.floor(a+Math.random()*(b-a));
		// 		arr.push()
		// 	};
		// };
		// console.log('radArr(10,100,10)---->' + radArr(1,4,1));  --->这是第一次写的错了 分析下

		var arr = [] ;
		function radArr(a,b,num){
			for(var i=a;i<b;i+=num){
				var radnum = Math.floor(a+Math.random()*(b-a+1));
				console.log('i-->'+i);
				arr.push(radnum);
			};
			arr.sort();
			console.log('arr-->'+ arr + '\n' + 'arr.length-->' + arr.length);
		};
		arr.push(radArr(10,100,10));
		
		// 紧挨着的下面是可以的  但是没有上面的好
		// function aa(a,b){
		// 	return Math.floor(Math.random()*(b-a+1)+a);
		// };
		// for(var i=0;i<10;i++){
		// 	arr.push(aa(10,100));
		// }
		// console.log(arr);

//.把两个数组合并，并删除第二个元素
		var a1 = [11,29,57,62,68,68,71,80,82];
		var a2 = [10,13,29,30,45,51,69,74,90];
		var aTotal = a1.concat(a2);
		console.log('aTotal--->'+ aTotal);
		aTotal.splice(1,1);
		console.log('aTotal--after--->'+ aTotal);

//写一段JS程序提取URL中的各个GET参数(参数名和参数个数不确定)，将其按key-value形式返回到一个json结构中，如{a:’1′, b:’2′, c:”, d:’xxx’, e:undefined}。
		var strTojson1 = 'URL：http://item.taobao.com/item.htm?a=1&b=2&c=&d=xxx&e';
		function strTojson(str){
			var json = {};
			var strAfter = str.split('?')[1];  //数组的第二项是字符串的形式，所以可以用split（）方法
			// console.log(strAfter);
			var strAfter = strAfter.split('&');
			// console.log(strAfter);  //  ["a=1", "b=2", "c=", "d=xxx", "e"]
			for(var i=0;i<strAfter.length;i++){
				// alert(strAfter[i]);  //每一项
				json[strAfter[i].split('=')[0]] = strAfter[i].split('=')[1];
			};
			return json;
		};
		console.log(strTojson(strTojson1));
//自己重新写 整理思路--》ok
		var strTojson2 = 'URL：http://item.taobao.com/item.htm?a=1&b=2&c=&d=xxx&e';
		function strTojson22(str){
			var json = {};
			var str1 = str.split('?')[1].split('&');
			// alert(str1.length);  //5
			for(var i=0;i<str1.length;i++){
				json[str1[i].split('=')[0]] = str1[i].split('=')[1] ;
			};
			return json;
		};
		console.log(strTojson22(strTojson2));

//  匹配邮箱的正则表达式：
		var regMail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/;
		var retMail1= /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/;

		for(var i=1;i<=3;i++){
		  setTimeout(function(){
		      //  console.log('i--->'+i);   //4  4  4  原因：Javascript事件处理器在线程空闲之前不会运行 
		  },0);  
		};	

		for(var i=0;i<=3;i++){
			setTimeout(function(a){  	  //改成立即执行函数
				console.log('a--->'+a);  // 0 1 2 3
			}(i),0);
		};	
//写一个function，清除字符串前后的空格。（兼容所有浏览器）
//-------使用自带接口trim()，考虑兼容性：
		if (!String.prototype.trim) { 
		 // String.prototype.trim = function() { 
		 // return this.replace(/^\s+/, "").replace(/\s+$/,"");
		 // } 
		 	String.prototype.trim = function(){
		 		return this.replace(/^\s+/,'').replace(/\s+$/,'');
		 		// 或者这样写 return this.replace(/(^\s*)|(\s*$)/,'');
		 	}
		} 
		 
		// test the function 
		//   var str = " \t\n test string ".trim(); 
		//   alert(str == "test string"); // alerts "true"

// caller是返回一个对函数的引用，该函数调用了当前函数；callee是返回正在被执行的function函数，也就是所指定的function	对象的正文。
//如果一对兔子每月生一对兔子；一对新生兔，从第二个月起就开始生兔子；假定每对兔子都是一雌一雄，试问一对兔子，第n个月能繁殖成多少对兔子？（使用callee完成）	
		var shengtuzu = [];
		function sheng(n){
			if(n==1){
				return 1;
			}else if(n==2){
				return 1;
			}else{
				if(shengtuzu[n]){
					return shengtuzu[n];
				}else{
					//argument.callee()表示 sheng(n)
					shengtuzu[n] = arguments.callee(n-1)+arguments.callee(n-2);
					return shengtuzu[n];
				}
			}
		};
		console.log('10个月能生几对兔子===>'+sheng(10));
//  如何消除一个数组里面重复的元素？
		var deArr = [1,2,3,3,4,4,5,5,6,1,9,3,25,4];
		function deArrfn(arr){
			for(var i=0;i<arr.length;i++){
				for(var j=i+1;j<arr.length;j++){
					if(arr[j]==arr[i]){
						arr.splice(j,1);
						j--;
					}
				}
			};
			return arr;  //  循环完毕之后 要返回数组 否则就是   undefined
		};
		console.log('deArr--->'+deArrfn(deArr));
// 疯狗那个问题
		function Dog(){
			this.wow = function(){
				console.log('wow');
			}
			this.yelp = function(){
				this.wow()
			}
		}
		function MadDog(){
			this.yelp = function(){
				var self = this;
				setInterval(function(){
					self.wow();
				},500);
			}
		};
		MadDog.prototype = new Dog();
		//for test
		var dog = new Dog();
		dog.yelp();  //wow
		var madDog = new MadDog();
		madDog.yelp();  // ok
//	下面这个ul，如何点击每一列的时候alert其index?（闭包）  -----md

			var alertindex = document.getElementsByTagName('li');
			for(var i=0;i<alertindex.length;i++){
				alertindex[i].index = i; 
				alertindex[i].onclick = function(){
					console.log(this.index);
				}
			};   //------------------------>error  why???????????????????
// 定义个log 代理console.log() --->apply
		function log1(msg){
			console.log(msg);
		};
		function log(msg){
			var args = Array.prototype.slice.call(arguments);
			args.unshift('(wxd)');
			console.log.apply(console,args);
		};
		log("hello!!");
// 对作用域上下文和this的理解，看下列代码：
		var User = {
			count:1,
			getCount:function(){
				return this.count;
			}
		};
		log(User.getCount()); // 1
		var func1 = User.getCount;
		log(func1());	// undefined   
		//  --->如果要确保Uesr总是能访问到func的上下文，即正确返回1 应该怎么做？ 看下面
		//正确的方法是使用Function.prototype.bind -----ruxia: jiaorong o ~~~
		Function.prototype.bind = Function.prototype.bind ||  function(context){
			var self = this;
			return function(){
				return self.apply(context,arguments);
			};
		}
		var func = User.getCount.bind(User);
		log('func()---->' + func());  // 1

//  如何用原生JS实现Jq的ready方法？
		function ready(fn){
		    if(document.addEventListener) {        //标准浏览器
		        document.addEventListener('DOMContentLoaded', function() {
		            //注销事件, 避免反复触发
		            document.removeEventListener('DOMContentLoaded',arguments.callee, false);
		            fn();            //执行函数
		        }, false);
		    }else if(document.attachEvent) {        //IE
		        document.attachEvent('onreadystatechange', function() {
		            if(document.readyState == 'complete') {
		                document.detachEvent('onreadystatechange', arguments.callee);
		                fn();        //函数执行
		            }
		        });
		    }
		};
//   想实现一个对页面某个节点的拖曳？如何做？（使用原生JS）   ------------------------> how to do ?????
		// var oDrag = document.getElementById('drag');
		// oDrag.onmousedown = function(ev){
		// 	var that = this;
		// 	ev = ev || event ;
		// 	oDrag.onmousemove = function(){
		// 		that.style.top = ev.clientY;
		// 		that.style.left = ev.clientX;
		// 	};
		// 	oDrag.onmouseup = function(){
		// 		// return false;
		// 		alert(12121)
		// 	}

		// }
// 用户第一次进来显示tips，同一天访问改页面不显示；  用户点击我知道了伺候不再显示tips提醒
// function setcookie(name,value,days){  //给cookie增加一个时间变量
// 　　var exp = new Date(); 
// 　　exp.setTime(exp.getTime() + days*24*60*60*1000); //设置过期时间为days天
// 　　document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString(); 
// } 
// function getCookie(name){
// 　　var result = "";
// 　　var myCookie = ""+document.cookie+";"; 
// 　　var searchName = "+name+"=" ";
// 　　var startOfCookie = myCookie.indexOf(searchName);
// 　　var endOfCookie;
// 　　if(satrtOfCookie != -1){
// 　　　　startOfcookie += searchName.length;
// 　　　　endOfCookie = myCookie.indexOf(";",startOfCookie);
// 　　　　result = (myCookie.substring(startOfCookie,endOfCookie));
// 　　}
// 　　return result;
// }
// (function(){
// 　　var oTips = document.getElementById('tips');//假设tips的id为tips
// 　　var page = {
// 　　check: function(){//检查tips的cookie是否存在并且允许显示
// 　　　　var tips = getCookie('tips');
// 　　　　if(!tips || tips == 'show') return true;//tips的cookie不存在
// 　　　　if(tips == "never_show_again") return false;
// 　　},
// 　　hideTip: function(bNever){
// 　　　　if(bNever) setcookie('tips', 'never_show_again', 365);
// 　　　　oTips.style.display = "none";//隐藏
// 　　},
// 　　showTip: function(){
// 　　oTips.style.display = "inline";//显示，假设tips为行级元素
// 　　},
// 　　init: function(){
// 　　　　var _this = this;
// 　　　　if(this.check()){
// 　　　　_this.showTip();
// 　　　　setcookie('tips', 'show', 1);
// 　　}
// 　　oTips.onclick = function(){
// 　　　　_this.hideTip(true);
// 　　};
// 　　}
// 　　};
//   page.init();
// })();
//  
//define 
(function(window){
    function fn(str){
        this.str=str;
    }
 
    fn.prototype.format = function(){
        var arg = arguments;
        return this.str.replace(/\{(\d+)\}/ig,function(a,b){
             return arg[b]||"";
      });
    }
    window.fn = fn;
})(window);
 
//use
(function(){
    var t = new fn('<p><a href="{0}">{1}</a><span>{2}</span></p>');
    console.log(t.format('http://www.alibaba.com','Alibaba','Welcome'));
})();
</script>

	<ul id='alertindex'>
		<li>这是第一条</li>
		<li>这是第二条</li>
		<li>这是第三条</li>
	</ul>	
	<div id="drag" style="width:100px;height:100px;background-color:red;position:absolute;top:0;left:0"></div>
</body>
</html>
