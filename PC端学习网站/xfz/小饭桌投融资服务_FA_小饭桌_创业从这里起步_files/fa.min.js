!function(t){function n(i){if(s[i])return s[i].exports;var e=s[i]={exports:{},id:i,loaded:!1};return t[i].call(e.exports,e,e.exports,n),e.loaded=!0,e.exports}var s={};return n.m=t,n.c=s,n.p="",n(0)}([function(t,n,s){t.exports=s(34)},,function(t,n){var s={init:function(){var t=this.isNav();$("header li").eq(t).addClass("focus").siblings().removeClass("focus")},isNav:function(){var t=window.location.href,n=0;return n=t.indexOf("posts")>0||t.indexOf("post")>0?0:t.indexOf("actives")>0||t.indexOf("active")>0||t.indexOf("events")>0||t.indexOf("event")>0||t.indexOf("course")>0||t.indexOf("topic")>0?1:t.indexOf("fa")>0?2:t.indexOf("app")>0?3:t.indexOf("about")>0||t.indexOf("service")>0?4:0}};t.exports=s},function(t,n,s){var i=s(4),e={init:function(){this.isHome(),this.showWx()},showWx:function(){$(".showWx").on("mouseenter",function(){$(".wxQr").fadeIn(500)}).on("mouseleave",function(){$(".wxQr").fadeOut(500)})},isHome:function(){"/"!=location.pathname&&"/posts/"!=location.pathname||this.getFootPartner()},getFootPartner:function(){$.get("/api/website/partners/",function(t){if("200"==t.code){var n=template.compile(i),s=n({partnerData:t.data});$(".footer-partner").html(s)}})}};t.exports=e},function(t,n){t.exports='<%if(partnerData.length > 0){%>\n	<%for(var k=0,partnerlen=partnerData.length;k<partnerlen;k++) {%>\n		<li data-uid="<%=partnerData[k].uid%>">\n			<a href="<%=partnerData[k].link%>" target="_blank"><img src="<%=partnerData[k].photo%>" alt="<%=partnerData[k].name%>"></a>\n		</li>\n	<%}%>\n<%}%>'},function(t,n,s){var i=s(6),e=s(13),a={init:function(){this.isPc()?($("body").attr("device","pc"),i.init()):($("body").attr("device","touch"),e.init())},isPc:function(){for(var t=navigator.userAgent,n=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),s=!0,i=0;i<n.length;i++)if(t.indexOf(n[i])>0){s=!1;break}return s}};t.exports=a},function(t,n,s){var i=s(7),e=s(8),a=s(9),o=s(10),l=s(11),c=s(12),d={init:function(){var t=location.href;t.indexOf("code")>0?this.getWxInfo():this.getInfo()},getWxInfo:function(){var t=this,n=t.parseQueryString(location.href).code;$.ajax({url:"/api/website/weixin/check/",type:"get",dataType:"json",beforeSend:function(){$(".login-mask").fadeIn(300,function(){$(this).append('<div class="login-loading"></div>')})},data:{code:n},success:function(s){if("200"==s.code)if(s.data.is_bind)location.href.indexOf("code")?location.href="http://"+location.host:location.href=location.href;else{var i=template.compile(o),a=i({});$(".login-container").append(a),$(".open-comm .photo-name").hide();var l=template.compile(e),c=l({});$(".login-mask").html(c),$(".bind-tips-card").fadeOut(50,function(){$(".is-bind-check").fadeIn(100)}),t.bind(),m.init(n)}else location.href.indexOf("code")?location.href="http://"+location.host:location.href=location.href}})},getInfo:function(){var t=this;$.ajax({url:"/api/website/user/info/",type:"get",dataType:"json",success:function(n){if("200"==n.code){var s=n.data.name.length>6?n.data.name.substring(0,6)+"...":n.data.name,e=template.compile(i),a=e({loginSuccessData:n.data,loginName:s});$(".login-container").append(a),$(".open-comm .photo-name")&&$(".open-comm .photo-name").show(0,function(){$(".photo-name-submit .photo img").attr("src",n.data.photo),$(".photo-name-submit .name").html(n.data.name)}),t.logOut(),window.loginState=1}else{var l=template.compile(o),c=l({});$(".login-container").append(c),$(".open-comm .photo-name").hide(),t.bind(),window.loginState=0}}})},parseQueryString:function(t){for(var n,s=t.split("?")[1],i=s.split("&"),e={},a=0;a<i.length;a++)n=i[a].split("="),e[n[0]]=n[1];return e},showLogin:function(){var t=this,n=template.compile(a),s=n({});$(".login-mask").fadeIn(200,function(){$(this).html(s),r.init(),t.switchCard()})},close:function(){var t=$(".close"),n=$(".login-mask");t.on("click",function(){var t=$(this);n.fadeOut(200,function(){t.parent().remove()})})},logOut:function(){$(".login-success-wrapper").on("click",function(t){t.stopPropagation(),$("#logout").fadeIn(200),u.init(),h.resetPwdBtn()}),$(document).on("click",function(){$("#logout").fadeOut()})},switchCard:function(){$(".dialog-bg").on("click","div",function(){var t=$(this);t.hasClass("small-bg")&&(t.hasClass("login-bg")?($(".slider").removeClass("bg-right").addClass("bg-left"),$(".login-card").removeClass("login-hide").addClass("login-show").siblings().removeClass("regist-show").addClass("regist-hide"),r.init()):($(".slider").removeClass("bg-left").addClass("bg-right"),$(".regist-card").removeClass("regist-hide").addClass("regist-show").siblings().removeClass("login-show").addClass("login-hide"),f.init()),t.removeClass("small-bg").addClass("big-bg").siblings().removeClass("big-bg").addClass("small-bg"))})},bind:function(){var t=this,n=$("#login-btn"),s=$("#regist-btn"),i=$(".login-mask");n.off().on("click",function(){var n=template.compile(a),s=n({});i.fadeIn(200,function(){$(this).html(s),r.init(),t.switchCard()})}),s.on("click",function(){var n=template.compile(a),s=n({});i.fadeIn(200,function(){$(this).html(s),f.init(),t.switchCard()})})}},r={init:function(){d.close(),d.bind(),this.resetPwd(),this.bind()},resetPwd:function(){$(".forget-password").off().on("click",function(){var t=template.compile(c),n=t({});$(".login-mask").fadeIn(200,function(){$(".login-mask").html(n),h.init()})})},bind:function(){var t=$(".login-phone"),n=$(".password"),s=($(".forget-password"),$(".login-submit")),e=$(".forget-tips .tips"),a=$(".login-mask"),o=$(".login-dialog"),l=$(".login-container input").val(),c=/^1[3|4|5|7|8|][0-9]{9}$/;o.on("focus",".input",function(){var t=$(this);t.css({color:"#6D85AC"}),t.on("keyup",function(){e.html("").css({background:"#fff"})})}).on("blur",".input",function(){var s=$(this);if(s.hasClass("login-phone")){if(!c.test($.trim(t.val())))return $(".login-card .phone-status-icon").fadeIn(0,function(){$(this).removeClass("success").addClass("false"),e.html("手机号码不正确!").css({background:"#FED6E1"})}),!1;$(".login-card .phone-status-icon").fadeIn(0,function(){$(this).removeClass("false").addClass("success"),e.html("").css({background:"#fff"})})}else if(s.hasClass("password")){if($.trim(n.val()).length>20||$.trim(n.val()).length<6)return e.html("密码不能包含空格，长度在6～20之间!").css({background:"#FED6E1"}),!1;e.html("").css({background:"#fff"})}}),s.off().on("click",function(){return c.test($.trim(t.val()))?$.trim(n.val()).length>20||$.trim(n.val()).length<6?(e.html("密码不能包含空格，长度在6～20之间!").css({background:"#FED6E1"}),!1):(e.html("").css({background:"#fff"}),void $.ajax({url:"/api/website/user/login/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:l,phone:$.trim(t.val()),password:$.trim(n.val())},success:function(t){if("200"==t.code){var n=t.data.name.length>6?t.data.name.substring(0,6)+"...":t.data.name;e.html("").css({background:"#fff"});var s=template.compile(i),l=s({loginSuccessData:t.data,loginName:n});a.fadeOut(200,function(){o.remove(),$(".login-false-wrapper").fadeOut(200,function(){$(".login-container").append(l),d.logOut()})}),location.href.indexOf("code")>0?location.href="http://"+location.host:location.href=location.href,window.loginState=1}else window.loginState=0,e.html(t.data.message).css({background:"#FED6E1"})}})):(e.html("手机号码不正确!").css({background:"#FED6E1"}),!1)})}},u={init:function(){this.bind()},bind:function(){$("#logout-btn").on("click",function(){$.ajax({url:"/api/website/user/logout/",type:"GET",dataType:"json",success:function(t){"200"==t.code?location.reload():alert(t.message)}})})}},f={init:function(){d.close(),d.switchCard(),d.bind(),this.bind()},bind:function(){var t,n=$(".regist-phone"),s=$(".verify-code"),i=$(".send-verify-code"),e=$(".next-submit"),a=$(".regist-tips"),o=$(".regist-card"),c=($(".login-mask"),$(".login-container input").val()),d=/^1[3|4|5|7|8|][0-9]{9}$/,r=/^\d{4}$/,u=60;i.removeClass("btn-able").addClass("btn-disable"),$(".slider").removeClass("bg-left").addClass("bg-right"),$(".regist-card").removeClass("regist-hide").addClass("regist-show").siblings().removeClass("login-show").addClass("login-hide"),$(".regist-bg").removeClass("small-bg").addClass("big-bg").siblings().removeClass("big-bg").addClass("small-bg"),o.off().on("focus",".input",function(){var t=$(this);t.css({color:"#6D85AC"}),t.on("keyup",function(){a.html("").css({background:"#fff"})})}).on("blur",".input",function(){var t=$(this);if(t.hasClass("regist-phone")){if(!d.test($.trim(n.val())))return $(".regist-card .phone-status-icon").fadeIn(0,function(){$(this).removeClass("success").addClass("false"),a.html("手机号码不正确!").css({background:"#FED6E1"})}),!1;$(".regist-card .phone-status-icon").fadeIn(0,function(){$(this).removeClass("false").addClass("success"),a.html("").css({background:"#fff"})})}else if(t.hasClass("verify-code")){if(!r.test($.trim(s.val())))return a.html("验证码格式不正确!").css({background:"#FED6E1"}),!1;a.html("").css({background:"#fff"})}}),n.off().on("input",function(){var t=$(this);return"true"==i.attr("send")?!1:d.test($.trim(t.val()))?void $(".regist-card .phone-status-icon").fadeIn(0,function(){$(this).removeClass("false").addClass("success"),i.removeClass("btn-disable").addClass("btn-able")}):(i.removeClass("btn-able").addClass("btn-disable"),!1)}),i.off().on("click",function(){var s=$(this);return s.hasClass("btn-disable")?!1:"true"==s.attr("send")?!1:void $.ajax({url:"/api/website/user/check_phone/",type:"get",dataType:"json",data:{phone:$.trim(n.val())},success:function(s){"200"==s.code?$.ajax({url:"/api/website/sms_captcha/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:c,phone:$.trim(n.val())},success:function(n){"200"==n.code?(t=setInterval(function(){u--,u>0?(i.val("发送验证码("+u+")"),i.attr("send",!0).removeClass("btn-able").addClass("btn-disable")):(i.val("发送验证码"),i.attr("send",!1).removeClass("btn-disable").addClass("btn-able"),clearInterval(t))},1e3),f.bind()):a.html(n.data.message).css({background:"#FED6E1"})}}):a.html(s.data.message).css({background:"#FED6E1"})}})}),e.off().on("click",function(){return d.test($.trim(n.val()))?r.test($.trim(s.val()))?void $.ajax({url:"/api/website/sms_captcha_check/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:c,phone:$.trim(n.val()),sms_captcha:$.trim(s.val())},success:function(t){if("200"!=t.code)return a.html("验证码不正确!").css({background:"#FED6E1"}),!1;var i=template.compile(l),e=i({});$(".login-mask").html(e),$(".regist-next-dialog").fadeIn(200),a.html("").css({background:"#fff"}),p.init($.trim(s.val()),$.trim(n.val()))}}):(a.html("验证码格式不正确!").css({background:"#FED6E1"}),!1):(a.html("手机号码不正确!").css({background:"#FED6E1"}),!1)})}},p={init:function(t,n,s,i){d.close(),d.bind(),this.bind(t,n,s,i)},bind:function(t,n,s,i){var e=$(".realname"),o=$(".regist-password"),l=$(".regist-prev-submit"),c=$(".regist-complete-submit"),d=$(".fill-card .tips"),r=$(".regist-next-dialog"),u=$(".login-container input").val();r.off().on("focus",".input",function(){var t=$(this);t.css({color:"#6D85AC"}),t.on("keyup",function(){d.html("").css({background:"#fff"})})}).on("blur",".input",function(){var t=$(this);if(t.hasClass("realname")){if($.trim(e.val()).length>15||$.trim(e.val()).length<2)return d.html("姓名不能包含空格，长度在2~15之间!").css({background:"#FED6E1"}),!1;d.html("").css({background:"#fff"})}else if(t.hasClass("regist-password")){if($.trim(o.val()).length>20||$.trim(o.val()).length<4)return d.html("密码不能包含空格，长度在6～20之间!").css({background:"#FED6E1"}),!1;d.html("").css({background:"#fff"})}}),l.off().on("click",function(){var t=template.compile(a),n=t({});$(".login-mask").html(n),$(".regist-next-dialog").fadeIn(200),f.init()}),c.off().on("click",function(){return $.trim(e.val()).length>15||$.trim(e.val()).length<2?(d.html("姓名不能包含空格，长度在2~15之间!").css({background:"#FED6E1"}),!1):0==$.trim(e.val()).length?(d.html("请填写姓名!").css({background:"#FED6E1"}),!1):$.trim(o.val()).length>20||$.trim(o.val()).length<4?(d.html("密码不能包含空格，长度在6～20之间!").css({background:"#FED6E1"}),!1):0==$.trim(o.val()).length?(d.html("请填写密码!").css({background:"#FED6E1"}),!1):(d.html("").css({background:"#fff"}),void $.ajax({url:"/api/website/user/sign_up/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:u,phone:n,sms_captcha:t,realname:$.trim(e.val()),password:$.trim(o.val())},success:function(e){"200"==e.code?("bind"==s&&$.ajax({url:"/api/website/weixin/bind/",type:"post",dataType:"json",data:{code:i,csrfmiddlewaretoken:u,phone:n,sms_captcha:t},success:function(t){"200"==t.code&&$(".login-mask").fadeOut("400",function(){location.href.indexOf("code")?location.href="http://"+location.host:location.href=location.href})}}),$(".login-mask").fadeOut(200,function(){r.remove()}),location.href.indexOf("code")?location.href="http://"+location.host:location.href=location.href):d.html(e.data.message).css({background:"#FED6E1"})}}))})}},h={init:function(){d.close(),this.bind()},resetPwdBtn:function(){var t=this;$("#reset-pwd-btn").on("click",function(){var n=template.compile(c),s=n({});$(".login-mask").fadeIn(200,function(){$(".login-mask").html(s),t.init()})})},bind:function(){var t,n=$(".reset-phone"),s=$(".reset-send-verify"),i=$(".fill-reset-verify"),e=$(".fill-new-password"),a=$(".reset-password-dialog"),o=$(".reset-tips"),l=$(".conform-reset-submit"),c=$(".login-mask"),d=$(".login-container input").val(),r=/^1[3|4|5|7|8|][0-9]{9}$/,u=/^\d{4}$/,f=60;s.removeClass("btn-able").addClass("btn-disable"),a.on("focus",".input",function(){var t=$(this);t.css({color:"#6D85AC"}),t.on("keyup",function(){o.html("").css({background:"#fff"})})}).on("blur",".input",function(){var t=$(this);if(t.hasClass("reset-phone")){if(!r.test($.trim(n.val())))return $(".fill-card-long .phone-status-icon").fadeIn(0,function(){$(this).removeClass("success").addClass("false"),o.html("手机号码不正确!").css({background:"#FED6E1"})}),!1;$(".fill-card-long .phone-status-icon").fadeIn(0,function(){$(this).removeClass("false").addClass("success"),o.html("").css({background:"#fff"})})}else if(t.hasClass("fill-new-password")){if($.trim(e.val()).length>20||$.trim(e.val()).length<6)return o.html("密码不能包含空格，长度在6～20之间!").css({background:"#FED6E1"}),!1;o.html("").css({background:"#fff"})}else if(t.hasClass("fill-reset-verify")){if(!u.test($.trim(i.val())))return o.html("验证码格式不正确!").css({background:"#FED6E1"}),!1;o.html("").css({background:"#fff"})}}),n.off().on("input",function(){var t=$(this);return"true"==s.attr("send")?!1:r.test($.trim(t.val()))?void $(".fill-card-long .phone-status-icon").fadeIn(0,function(){$(this).removeClass("false").addClass("success"),s.removeClass("btn-disable").addClass("btn-able")}):(s.removeClass("btn-able").addClass("btn-disable"),!1)}),s.off().on("click",function(){var i=$(this);return i.hasClass("btn-disable")?!1:"true"==i.attr("send")?!1:void $.ajax({url:"/api/website/user/check_phone/",type:"get",dataType:"json",data:{phone:$.trim(n.val())},success:function(i){"200"!=i.code?$.ajax({url:"/api/website/sms_captcha/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:d,phone:$.trim(n.val())},success:function(n){"200"==n.code?(t=setInterval(function(){f--,f>0?(s.val("发送验证码("+f+")"),s.attr("send",!0).removeClass("btn-able").addClass("btn-disable")):(s.val("发送验证码"),s.attr("send",!1).removeClass("btn-disable").addClass("btn-able"),clearInterval(t))},1e3),h.bind()):(s.removeClass("btn-able").addClass("btn-disable"),o.html(n.data.message).css({background:"#FED6E1"}))}}):(o.html("该手机号未注册！").css({background:"#FED6E1"}),s.removeClass("btn-able").addClass("btn-disable"))}})}),i.off().on("input",function(){$(this).css({color:"#6D85AC"})}),e.off().on("input",function(){$(this).css({color:"#6D85AC"})}),l.off().on("click",function(){return r.test($.trim(n.val()))?u.test($.trim(i.val()))?$.trim(e.val()).length>20||$.trim(e.val()).length<4?(o.html("密码不能包含空格，长度在6～20之间!").css({background:"#FED6E1"}),!1):(o.html("").css({background:"#fff"}),void $.ajax({url:"/api/website/user/update_password/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:d,phone:$.trim(n.val()),sms_captcha:$.trim(i.val()),password:$.trim(e.val())},success:function(t){"200"==t.code&&c.fadeOut(200,function(){a.remove(),location.href.indexOf("code")?location.href="http://"+location.host:location.href=location.href})}})):(o.html("验证码格式不正确!").css({background:"#FED6E1"}),!1):(o.html("手机号码不正确!").css({background:"#FED6E1"}),!1)})}},m={init:function(t){d.close(),this.bind(t)},bind:function(t){var n,s=this,i=$(".bind-phone-num"),e=$(".bind-fill-verify"),a=$(".bind-send-verify"),o=$(".bind-btn-submit"),c=$(".bind-phone-dialog .tips"),d=$(".bind-phone-dialog"),r=($(".login-mask"),$(".login-container input").val()),u=/^1[3|4|5|7|8|][0-9]{9}$/,h=/^\d{4}$/,m=60;a.removeClass("btn-able").addClass("btn-disable"),d.off().on("focus",".input",function(){var t=$(this);t.css({color:"#6D85AC"}),t.on("keyup",function(){c.html("").css({background:"#fff"})})}).on("blur",".input",function(){var t=$(this);if(t.hasClass("bind-phone-num")){if(!u.test($.trim(i.val())))return $(".is-bind-check .phone-status-icon").fadeIn(0,function(){$(this).removeClass("success").addClass("false"),c.html("手机号码不正确!").css({background:"#FED6E1"})}),!1;$(".is-bind-check .phone-status-icon").fadeIn(0,function(){$(this).removeClass("false").addClass("success"),c.html("").css({background:"#fff"})})}else if(t.hasClass("bind-fill-verify")){if(!h.test($.trim(e.val())))return c.html("验证码格式不正确!").css({background:"#FED6E1"}),!1;c.html("").css({background:"#fff"})}}),i.off().on("input",function(){var t=$(this);return"true"==a.attr("send")?!1:u.test($.trim(t.val()))?void $(".is-bind-check .phone-status-icon").fadeIn(0,function(){$(this).removeClass("false").addClass("success"),a.removeClass("btn-disable").addClass("btn-able")}):(a.removeClass("btn-able").addClass("btn-disable"),!1)}),a.off().on("click",function(){var t=$(this);return t.hasClass("btn-disable")?!1:"true"==t.attr("send")?!1:void $.ajax({url:"/api/website/sms_captcha/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:r,phone:$.trim(i.val())},success:function(t){"200"==t.code?(n=setInterval(function(){m--,m>0?(a.val("发送验证码("+m+")"),a.attr("send",!0).removeClass("btn-able").addClass("btn-disable")):(a.val("发送验证码"),a.attr("send",!1).removeClass("btn-disable").addClass("btn-able"),clearInterval(n))},1e3),f.bind()):c.html(t.data.message).css({background:"#FED6E1"})}})}),o.off().on("click",function(){return u.test($.trim(i.val()))?h.test($.trim(e.val()))?void $.ajax({url:"/api/website/weixin/info/",type:"get",dataType:"json",data:{phone:$.trim(i.val()),sms_captcha:$.trim(e.val())},success:function(n){if("200"!=n.code)return c.html("验证码不正确!").css({background:"#FED6E1"}),!1;if(n.data.is_exist)$(".is-bind-check").fadeOut(50,function(){$(".bind-tips-card").fadeIn(100),$(".bind-tips-card .phone").html($.trim(i.val())),$(".bind-tips-card img").attr("src",n.data.photo),s.continueBind(t)});else{var a=template.compile(l),o=a({});$(".login-mask").html(o),$(".regist-next-dialog").fadeIn(200),c.html("").css({background:"#fff"}),p.init($.trim(e.val()),$.trim(i.val()),"bind",t)}}}):(c.html("验证码格式不正确!").css({background:"#FED6E1"}),!1):(c.html("手机号码不正确!").css({background:"#FED6E1"}),!1)})},continueBind:function(t){var n=$(".login-container input").val(),s=$(".bind-phone-num"),i=$(".bind-fill-verify");$(".continue-bind-submit").on("click",function(){$.ajax({url:"/api/website/weixin/bind/",type:"post",dataType:"json",data:{code:t,csrfmiddlewaretoken:n,phone:$.trim(s.val()),sms_captcha:$.trim(i.val())},success:function(t){"200"==t.code&&$(".login-mask").fadeOut("400",function(){location.href.indexOf("code")?location.href="http://"+location.host:location.href=location.href})}})}),$(".bind-cancel-submit").on("click",function(){$(".login-mask").fadeOut(400),location.href.indexOf("code")?location.href="http://"+location.host:location.href=location.href})}};t.exports=d},function(t,n){t.exports='<div class="login-success-wrapper">\n	<div class="photo">\n		<%if(loginSuccessData.photo) {%>\n        	<img src="<%=loginSuccessData.photo%>">\n        <%}else{%>\n        	<img src="http://www.xfz.cn/static/build/images/topic_photo.png">\n        <%}%>\n    </div>\n    <div class="name"><%=loginName%></div>\n</div>'},function(t,n){t.exports='<div class="bind-phone-dialog dialog">\n	<div class="bind-phone-close close"></div>\n	<div class="dialog-title-bg">\n		<span>绑定手机号</span>\n	</div>\n	<div class="is-bind-check fill-card">\n		<div class="bind-phone-input">\n			<input type="tel" pattern="^\\d{11}$" class="bind-phone-num input long-input"  placeholder="仅支持中国大陆手机号" maxlength="11" autocomplete="off">\n			<i class="phone-status-icon"></i>\n		</div>\n		<div class="bind-verify">\n			<input type="tel" pattern="^\\d{4}$" class="bind-fill-verify input short-input"  placeholder="验证码" maxlength="4" validate="^\\d{4}$" autocomplete="off">\n			<input type="button" class="bind-send-verify input-button short-button" value="发送验证码">\n		</div>\n		<div class="tips-container">\n			<div class="tips bind-phone-tips"></div>\n		</div>\n		<div class="bind-btn-submit submit">下一步</div>\n	</div>\n	<div class="bind-tips-card fill-card">\n		<div class="photo">\n			<img src="http://www.xfz.cn/static/build/images/topic_photo.png">\n		</div>\n		<div class="bind-tips">\n			<div class="phone-tips"><span class="phone"></span><span>已注册小饭桌</span></div>\n			<div class="bind-tips">是否绑定该手机号</div>\n		</div>\n		<div class="next-bind">\n			<div class="bind-cancel-submit submit">取消</div>\n			<div class="continue-bind-submit submit">继续绑定</div>\n		</div>\n	</div>\n</div>'},function(t,n){t.exports='<div class="login-dialog dialog">\n	<div class="login-close close"></div>\n	<div class="dialog-bg">\n		<div class="login-bg big-bg">\n			<span class="login-btn">登录</span>\n		</div>\n		<div class="regist-bg small-bg">\n			<span class="regist-btn">注册</span>\n		</div>\n	</div>\n	<div class="login-fill-card">\n		<div class="login-card card login-show">\n			<div class="inputs">\n				<div class="login-phone-input">\n					<input type="text" pattern="^\\d{11}$" class="login-phone input long-input"  placeholder="仅支持中国大陆手机号" maxlength="11" autocomplete="off">\n					<i class="phone-status-icon"></i>\n				</div>\n				<input type="password" class="password input long-input" placeholder="密码" autocomplete="off">\n				<div class="forget-tips">\n					<a href="javascript:void(0)" class="forget-password">忘记密码</a>\n					<div class="tips"></div>\n				</div>\n				<div class="login-submit submit">登录</div>\n			</div>\n			<div class="other-login">\n				<div>第三方网站账号登录</div>\n				<a href="https://open.weixin.qq.com/connect/qrconnect?appid=wx5d417cd26ae2f339&redirect_uri=http%3A%2F%2Fwww.xfz.cn&response_type=code&scope=snsapi_login" class="wx-login"></a>\n			</div>\n		</div>\n		<div class="regist-card card regist-hide">\n			<div class="inputs">\n				<div class="regist-phone-input">\n					<input type="text" pattern="^\\d{11}$" class="regist-phone input long-input" placeholder="仅支持中国大陆手机号" maxlength="11" autocomplete="off">\n					<i class="phone-status-icon"></i>\n				</div>\n				<div class="verify">\n					<input type="text" pattern="^\\d{4}$" class="verify-code input short-input"  placeholder="验证码" maxlength="4" validate="^\\d{4}$" autocomplete="off">\n					<input type="button" class="send-verify-code input-button short-button"  send="false" value="发送验证码">\n				</div>\n				<div class="tips-container">\n					<div class="tips regist-tips"></div>\n				</div>\n				<div class="next-submit submit">下一步</div>\n			</div>\n			<div class="other-login">\n			<div>第三方网站账号登录</div>\n				<a href="https://open.weixin.qq.com/connect/qrconnect?appid=wx5d417cd26ae2f339&redirect_uri=http%3A%2F%2Fwww.xfz.cn&response_type=code&scope=snsapi_login" class="wx-login"></a>\n			</div>\n		</div>\n	</div>\n	<div class="slider"></div>\n</div>'},function(t,n){t.exports='<div class="login-false-wrapper">\n	<i class="icon"></i>\n	<a href="javascript:void(0)" id="login-btn">登录</a>\n	<b>/</b>\n	<a href="javascript:void(0)" id="regist-btn">注册</a>\n</div>'},function(t,n){t.exports='<div class="regist-next-dialog dialog">\n	<div class="regist-next-close close"></div>\n		<div class="dialog-title-bg">\n			<span>就差这一步</span>\n		</div>\n		<div class="fill-card">\n			<input type="text" style="display:none">\n			<input type="password" style="display:none">\n			<input type="text" class="realname input long-input" placeholder="真实姓名" autocomplete="off">\n			<input type="password" class="regist-password input long-input" placeholder="密码" minlength="6" maxlength="20" autocomplete="off">\n			<div class="tips-container">\n				<div class="tips resist-next-tips"></div>\n			</div>\n			<div class="next-complete">\n			<div class="regist-prev-submit submit">上一步</div>\n			<div class="regist-complete-submit submit">完成注册</div>\n		</div>\n	</div>\n</div>'},function(t,n){t.exports='<div class="reset-password-dialog dialog">\n	<div class="reset-password-close close"></div>\n	<div class="dialog-title-bg">\n		<span>修改密码</span>\n	</div>\n	<div class="fill-card fill-card-long">\n		<div class="reset-phone-input">\n			<input type="tel" pattern="^\\d{11}$" class="reset-phone input long-input" placeholder="仅支持中国大陆手机号" maxlength="11" autocomplete="off">\n			<i class="phone-status-icon"></i>\n		</div>\n		<div class="reset-verify-btn">\n			<input type="tel" pattern="^\\d{4}$" class="fill-reset-verify input short-input" placeholder="验证码" maxlength="4" validate="^\\d{4}$" autocomplete="off">\n			<input type="button" class="reset-send-verify input-button short-button" value="发送验证码" send="false">\n		</div>\n		<input type="password" class="fill-new-password input long-input" placeholder="输入新密码" autocomplete="off" autocomplete="off">\n		<div class="tips-container">\n			<div class="tips reset-tips"></div>\n		</div>\n		<div class="conform-reset-submit submit">确定修改</div>\n	</div>\n</div>'},function(t,n,s){var i=s(14),e=s(15),a=s(16),o={init:function(){$("body").append('<script type="text/javascript" src="http://apps.bdimg.com/libs/zepto/1.1.4/zepto.min.js"></script>'),$.ajax({url:"/api/website/user/info/",type:"get",dataType:"json",success:function(t){"200"==t.code?(window.loginState=1,$(".photo-name")&&$(".photo-name").show(0,function(){$(".photo-name-submit .photo img").attr("src",t.data.photo),$(".photo-name-submit .name").html(t.data.name)})):window.loginState=0}})},showLogin:function(){var t=template.compile(e),n=t({});$(".login-mask").fadeIn(100,function(){$(this).html(n),$(".login-card").show().data("show",!0),$(".regist-card").hide(),l.init()})},close:function(){function t(t){t=t||window.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1}var n=$(".close"),s=$(".login-mask"),i=function(){$(document).on("mousewheel",t),$(document).on("touchmove",t)},e=function(){$(document).off("mousewheel",t),$(document).off("touchmove",t)};i(),n.on("click",function(){var t=$(this);s.fadeOut(200,function(){t.parent().remove()}),e()})},switchCard:function(){$(".login-regist .tab").on("click","div",function(){$(this).hasClass("login-btn")?$(".login-card").data("show")||($(".login-btn").addClass("active").siblings().removeClass("active"),$(".regist-card").fadeOut(100,function(){$(".login-card").fadeIn(500).data("show",!0),$(".regist-card .tips").html("").css({background:"#fff"}),$(".phone-status-icon").hide(),l.init()}).data("show",!1)):$(".regist-card").data("show")||($(".regist-btn").addClass("active").siblings().removeClass("active"),$(".login-card").fadeOut(100,function(){$(".regist-card").fadeIn(500).data("show",!0),$(".login-card .tips").html("").css({background:"#fff"}),$(".phone-status-icon").hide(),d.init()}).data("show",!1))})}},l={init:function(){o.close(),o.switchCard(),this.resetPwd(),this.bind()},resetPwd:function(){$(".foget-pwd").off().on("click",function(){var t=template.compile(a),n=t({});$(".login-mask").html(n),c.init()})},bind:function(){var t=$(".login-phone"),n=$(".password"),s=($(".forget-password"),$(".login-submit")),i=$(".login-card .tips"),e=($(".login-mask"),$(".mobile-dialog")),a=$(".login-container input").val(),o=/^1[3|4|5|7|8|][0-9]{9}$/;e.on("focus",".input",function(){var t=$(this);t.css({color:"#6D85AC"}),t.on("keyup",function(){i.html("").css({background:"#fff"})})}).on("blur",".input",function(){var s=$(this);if(s.hasClass("login-phone")){if(!o.test($.trim(t.val())))return $(".login-card .phone-status-icon").fadeIn(0,function(){$(this).removeClass("success").addClass("false"),i.html("手机号码不正确!").css({background:"#FED6E1"})}),!1;$(".login-card .phone-status-icon").fadeIn(0,function(){$(this).removeClass("false").addClass("success"),i.html("").css({background:"#fff"})})}else if(s.hasClass("password")){if($.trim(n.val()).length>20||$.trim(n.val()).length<6)return i.html("密码不能包含空格，长度在6～20之间!").css({background:"#FED6E1"}),!1;i.html("").css({background:"#fff"})}}),s.off().on("click",function(){return o.test($.trim(t.val()))?$.trim(n.val()).length>20||$.trim(n.val()).length<6?(i.html("密码不能包含空格，长度在6～20之间!").css({background:"#FED6E1"}),!1):(i.html("").css({background:"#fff"}),void $.ajax({url:"/api/website/user/login/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:a,phone:$.trim(t.val()),password:$.trim(n.val())},success:function(t){"200"==t.code?(i.html("").css({background:"#fff"}),$(".login-mask").fadeOut(200,function(){e.remove(),$(".photo-name").show(0,function(){$(".photo-name-submit .photo img").attr("src",t.data.photo),$(".photo-name-submit .name").html(t.data.name)}),window.loginState=1,location.href=location.href})):(window.loginState=0,i.html(t.data.message).css({background:"#FED6E1"}))}})):(i.html("手机号码不正确!").css({background:"#FED6E1"}),!1)})}},c={init:function(){o.close(),this.bind()},bind:function(){var t,n=$(".reset-phone"),s=$(".reset-send-verify"),i=$(".fill-reset-verify"),e=$(".fill-new-password"),a=$(".reset-password-dialog"),o=$(".reset-tips"),l=$(".conform-reset-submit"),d=$(".login-mask"),r=$(".login-container input").val(),u=/^1[3|4|5|7|8|][0-9]{9}$/,f=/^\d{4}$/,p=60;s.removeClass("btn-able").addClass("btn-disable"),n.off().on("input",function(){var t=$(this);return t.css({color:"#6D85AC"}),"true"==s.attr("send")?!1:u.test($.trim(t.val()))?void s.removeClass("btn-disable").addClass("btn-able"):(s.removeClass("btn-able").addClass("btn-disable"),!1)}),s.off().on("click",function(){var i=$(this);return i.hasClass("btn-disable")?!1:"true"==i.attr("send")?!1:void $.ajax({url:"/api/website/user/check_phone/",type:"get",dataType:"json",data:{phone:$.trim(n.val())},success:function(i){"200"!=i.code?$.ajax({url:"/api/website/sms_captcha/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:r,phone:$.trim(n.val())},success:function(n){"200"==n.code?(t=setInterval(function(){p--,p>0?(s.html("发送验证码("+p+")"),s.attr("send",!0).removeClass("btn-able").addClass("btn-disable")):(s.val("发送验证码"),s.attr("send",!1).removeClass("btn-disable").addClass("btn-able"),clearInterval(t))},1e3),c.bind()):o.html(n.data.message).css({background:"#FED6E1"})}}):(o.html("该手机号未注册！").css({background:"#FED6E1"}),s.removeClass("btn-able").addClass("btn-disable"))}})}),i.off().on("input",function(){$(this).css({color:"#6D85AC"})}),e.off().on("input",function(){$(this).css({color:"#6D85AC"})}),l.off().on("click",function(){return u.test($.trim(n.val()))?f.test($.trim(i.val()))?$.trim(e.val()).length>20||$.trim(e.val()).length<4?(o.html("密码不能包含空格，长度在6～20之间!").css({background:"#FED6E1"}),!1):(o.html("").css({background:"#fff"}),void $.ajax({url:"/api/website/user/update_password/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:r,phone:$.trim(n.val()),sms_captcha:$.trim(i.val()),password:$.trim(e.val())},success:function(t){"200"==t.code&&(d.fadeOut(200,function(){a.remove()}),location.reload())}})):(o.html("验证码格式不正确!").css({background:"#FED6E1"}),!1):(o.html("手机号码不正确!").css({background:"#FED6E1"}),!1)})}},d={init:function(t){o.close(),o.switchCard(),this.bind(t)},bind:function(t){var n,s=$(".regist-phone"),e=$(".verify-code"),a=$(".send-verify-code"),o=$(".regist-next"),l=$(".regist-card .tips"),c=$(".regist-card"),u=($(".login-mask"),$(".login-container input").val()),f=/^1[3|4|5|7|8|][0-9]{9}$/,p=/^\d{4}$/,h=60;"registNext"==t&&(a.removeClass("btn-able").addClass("btn-disable"),
$(".regist-btn").addClass("active").siblings().removeClass("active"),$(".login-card").fadeOut(100,function(){$(".regist-card").fadeIn(500).data("show",!0),$(".login-card .tips").html("").css({background:"#fff"}),$(".phone-status-icon").hide(),d.init()}).data("show",!1)),c.off().on("focus",".input",function(){var t=$(this);t.css({color:"#6D85AC"}),t.on("keyup",function(){l.html("").css({background:"#fff"})})}).on("blur",".input",function(){var t=$(this);if(t.hasClass("regist-phone")){if(!f.test($.trim(s.val())))return $(".regist-card .phone-status-icon").fadeIn(0,function(){$(this).removeClass("success").addClass("false"),l.html("手机号码不正确!").css({background:"#FED6E1"})}),!1;$(".regist-card .phone-status-icon").fadeIn(0,function(){$(this).removeClass("false").addClass("success"),l.html("").css({background:"#fff"})})}else if(t.hasClass("verify-code")){if(!p.test($.trim(e.val())))return l.html("验证码格式不正确!").css({background:"#FED6E1"}),!1;l.html("").css({background:"#fff"})}}),s.off().on("input",function(){var t=$(this);return"true"==a.attr("send")?!1:f.test($.trim(t.val()))?void $(".regist-card .phone-status-icon").fadeIn(0,function(){$(this).removeClass("false").addClass("success"),a.removeClass("btn-disable").addClass("btn-able")}):(a.removeClass("btn-able").addClass("btn-disable"),!1)}),a.off().on("click",function(){var t=$(this);return t.hasClass("btn-disable")?!1:"true"==t.attr("send")?!1:void $.ajax({url:"/api/website/user/check_phone/",type:"get",dataType:"json",data:{phone:$.trim(s.val())},success:function(t){"200"==t.code?$.ajax({url:"/api/website/sms_captcha/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:u,phone:$.trim(s.val())},success:function(t){"200"==t.code?(n=setInterval(function(){h--,h>0?(a.html("发送验证码("+h+")"),a.attr("send",!0).removeClass("btn-able").addClass("btn-disable")):(a.val("发送验证码"),a.attr("send",!1).removeClass("btn-disable").addClass("btn-able"),clearInterval(n))},1e3),d.bind()):l.html(t.data.message).css({background:"#FED6E1"})}}):l.html(t.data.message).css({background:"#FED6E1"})}})}),o.off().on("click",function(){return f.test($.trim(s.val()))?p.test($.trim(e.val()))?void $.ajax({url:"/api/website/sms_captcha_check/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:u,phone:$.trim(s.val()),sms_captcha:$.trim(e.val())},success:function(t){if("200"!=t.code)return l.html("验证码不正确!").css({background:"#FED6E1"}),!1;var n=template.compile(i),a=n({});$(".login-mask").html(a),$(".regist-next-dialog").fadeIn(200),l.html("").css({background:"#fff"}),r.init($.trim(e.val()),$.trim(s.val()))}}):(l.html("验证码格式不正确!").css({background:"#FED6E1"}),!1):(l.html("手机号码不正确!").css({background:"#FED6E1"}),!1)})}},r={init:function(t,n){o.close(),this.bind(t,n)},bind:function(t,n){var s=$(".real-name"),i=$(".regist-password"),a=$(".regist-prev-submit"),o=$(".regist-complete-submit"),l=$(".fill-msg .tips"),c=$(".fill-msg"),r=$(".login-container input").val();c.off().on("focus",".input",function(){var t=$(this);t.css({color:"#6D85AC"}),t.on("keyup",function(){l.html("").css({background:"#fff"})})}).on("blur",".input",function(){var t=$(this);if(t.hasClass("realname")){if($.trim(s.val()).length>15||$.trim(s.val()).length<2)return l.html("姓名不能包含空格，长度在2~15之间!").css({background:"#FED6E1"}),!1;l.html("").css({background:"#fff"})}else if(t.hasClass("regist-password")){if($.trim(i.val()).length>20||$.trim(i.val()).length<4)return l.html("密码不能包含空格，长度在6～20之间!").css({background:"#FED6E1"}),!1;l.html("").css({background:"#fff"})}}),a.off().on("click",function(){var t=template.compile(e),n=t({});$(".login-mask").html(n),$(".regist-next-dialog").fadeIn(200),d.init("registNext")}),o.off().on("click",function(){return $.trim(s.val()).length>15||$.trim(s.val()).length<2?(l.html("姓名不能包含空格，长度在2~15之间!").css({background:"#FED6E1"}),!1):0==$.trim(s.val()).length?(l.html("请填写姓名!").css({background:"#FED6E1"}),!1):$.trim(i.val()).length>20||$.trim(i.val()).length<4?(l.html("密码不能包含空格，长度在6～20之间!").css({background:"#FED6E1"}),!1):0==$.trim(i.val()).length?(l.html("请填写密码!").css({background:"#FED6E1"}),!1):(l.html("").css({background:"#fff"}),void $.ajax({url:"/api/website/user/sign_up/",type:"POST",dataType:"json",data:{csrfmiddlewaretoken:r,phone:n,sms_captcha:t,realname:$.trim(s.val()),password:$.trim(i.val())},success:function(t){"200"==t.code?($(".login-mask").fadeOut(200,function(){c.remove()}),location.reload()):l.html(t.data.message).css({background:"#FED6E1"})}}))})}};t.exports=o},function(t,n){t.exports='<div class="mobile-dialog fill-msg">\n    <div class="close"></div>\n    <div class="text">就差这一步</div>\n    <div class="fill-card">\n        <div class="logo"></div>\n        <div class="tips-container">\n            <div class="tips"></div>\n        </div>\n        <input type="text" class="real-name input long-input" placeholder="真实姓名">\n        <input type="password" class="regist-password input long-input" placeholder="密码" minlength="6" maxlength="20" autocomplete="off">\n        <div class="next-complete">\n            <div class="regist-prev-submit submit">上一步</div>\n            <div class="regist-complete-submit submit">完成注册</div>\n        </div>\n    </div>\n</div>'},function(t,n){t.exports='<div class="mobile-dialog login-regist">\n    <div class="login-close close"></div>\n    <div class="tab">\n        <div class="login-btn btn active">登录</div>\n        <div class="regist-btn btn">注册</div>\n    </div>\n    <div class="login-card card" data-show="true">\n        <div class="logo"></div>\n        <div class="tips-container">\n            <div class="tips"></div>\n        </div>\n        <div class="login-phone-input">\n            <input type="tel" pattern="^d{11}$" class="login-phone input long-input" placeholder="仅支持中国大陆手机号" maxlength="11">\n            <i class="phone-status-icon"></i>\n        </div>\n        <input type="password" class="password input long-input" placeholder="密码" autocomplete="off" minlength="6" maxlength="20">\n        <div class="foget-pwd">忘记密码</div>\n        <div class="login-submit">登录</div>\n    </div>\n    <div class="regist-card card" data-show="false">\n        <div class="logo"></div>\n        <div class="tips-container">\n            <div class="tips"></div>\n        </div>\n        <div class="regist-phone-input">\n            <input type="tel" pattern="^d{11}$" class="regist-phone input long-input" placeholder="仅支持中国大陆手机号" maxlength="11">\n            <i class="phone-status-icon"></i>\n        </div>\n        <div class="verify">\n            <input type="tel" pattern="^d{4}$" class="verify-code input short-input" placeholder="验证码" maxlength="4" validate="^d{4}$">\n            <div class="send-verify-code input-button short-button btn-disable" send="false">发送验证码</div>\n        </div>\n        <div class="regist-next submit" id="regist-next">下一步</div>\n   </div>\n</div>'},function(t,n){t.exports='<div class="mobile-dialog reset-password">\n    <div class="reset-password-close close"></div>\n    <div class="text">修改密码</div>\n    <div class="fill-card fill-card-long">\n        <div class="tips-container">\n            <div class="tips reset-tips"></div>\n        </div>\n        <div class="reset-phone-input">\n            <input type="tel" pattern="^\\d{11}$" class="reset-phone input long-input" id="reset-phone" placeholder="仅支持中国大陆手机号" maxlength="11">\n            <i class="phone-status-icon"></i>\n        </div>\n        <div class="reset-verify-btn">\n            <input type="tel" pattern="^\\d{4}$" class="fill-reset-verify input short-input" id="fill-reset-verify" placeholder="验证码" maxlength="4" validate="^\\d{4}$">\n            <div class="reset-send-verify input-button short-button" id="reset-send-verify" send="false">发送验证码</div>\n        </div>\n        <input type="password" class="fill-new-password input long-input" id="fill-new-password" placeholder="输入新密码" autocomplete="off">\n        <div class="conform-reset-submit submit">确定修改</div>\n    </div>\n</div>'},,,,,,,,,,,,,,,,,,function(t,n,s){var i=s(2),e=s(3),a=s(5),o=s(35);i.init(),e.init(),o.init(),a.init()},function(t,n){var s={init:function(){this.isPhone(),this.dealWeiBoSeo(),$("title").html("小饭桌投融资服务_FA_小饭桌_创业从这里起步")},isPhone:function(){for(var t=navigator.userAgent,n=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],s=!0,i=0;i<n.length;i++){if(t.indexOf(n[i])>0){s=!1;break}s=!0}s?this.bind():this.getWx()},getWx:function(){var t=this,n={url:location.href};$.ajax({url:"/api/website/signature/weixin/",type:"post",data:n,success:function(n){t.callBack(n.data)}})},dealWeiBoSeo:function(){var t="小饭桌投融资服务—高效用心，并不仅仅是FA！",n="http://7xpr29.com2.z0.glb.clouddn.com/1451901581x-1376440230.png",s="http://www.xfz.cn/";$("#ogTitle").attr("content",t),$("#ogImg").attr("content",n),$("#ogUrl").attr("content",s)},callBack:function(t){var n=location.href,s="小饭桌投融资服务—高效用心，并不仅仅是FA！",i="全程一对一跟踪服务，你身边万能的融资小助手。",e="http://7xpr29.com2.z0.glb.clouddn.com/1451901581x-1376440230.png";wx.config({debug:!1,appId:t.app_id,timestamp:t.timestamp,nonceStr:t.noncestr,signature:t.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),wx.ready(function(){wx.onMenuShareTimeline({title:s,link:n,imgUrl:e,desc:i,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:s,link:n,imgUrl:e,desc:i,type:"",dataUrl:"",success:function(){},cancel:function(){}})})},bind:function(){$(window).scroll(function(){var t=document.body.scrollTop,n=$(document).height()-158-$(window).height();t>=n?($(".float-mail").hide(),$(".float-mail-bottom").show()):($(".float-mail").show(),$(".float-mail-bottom").hide())})}};t.exports=s}]);